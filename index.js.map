{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nlet lightbox;\n\nexport function createGallery(images){\n    const markup = images.map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads\n    }) => `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"gallery-image\"src=\"${webformatURL}\" alt=\"${tags}\"/>\n    </a>\n    <div class=\"info\">\n    <p class=\"info-item\"><b>Likes</b> ${likes}</p>\n    <p class=\"info-item\"><b>Views</b> ${views}</p>\n    <p class=\"info-item\"><b>Comments</b> ${comments}</p>\n    <p class=\"info-item\"><b>Downloads</b> ${downloads}</p>\n    </div>\n    </li>`\n    )\n        .join(\"\");\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250,\n        })\n    } else {\n        lightbox.refresh();\n    }\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = \"\";\n}\n\nexport function showLoader() {\n        loader.classList.add(\"is-loading\");\n        loader.textContent = \"Loading images, please wait...\"\n}\n\nexport function hideLoader() {\n        loader.classList.remove(\"is-loading\");\n        loader.textContent = \"\";\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove(\"hidden\");\n}\n\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add(\"hidden\");\n}","import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createGallery, hideLoader } from \"./render-functions\";\n\nconst API_KEY = '49743900-b0f1cd5437de5205d7989fbc4';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page = 1) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: PER_PAGE,\n        page,\n    });\n\n    try {\n        const response = await axios.get(`${BASE_URL}?${params}`);\n        return response.data\n    } catch (error) {\n        console.log(error);\n            throw error;\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\n\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from \"./js/render-functions\"\n\n\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('[name=\"search-text\"]');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nlet loadedHits = 0;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    currentQuery = input.value.trim();\n    if (!currentQuery) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query.',\n            position: 'topRight',\n        });\n        return\n    }\n    \n    currentPage = 1;\n    loadedHits = 0;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        totalHits = data.totalHits;\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n                    title: 'No Results',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                });\n        } else {\n            createGallery(data.hits);\n            loadedHits += data.hits.length;\n            if (loadedHits < totalHits) {\n                showLoadMoreButton();\n            }\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Please try again later.',\n            position: 'topRight',\n        })\n    } finally {\n        hideLoader();\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        createGallery(data.hits);\n        loadedHits += data.hits.length;\n\n        smoothScroll();\n\n        if (loadedHits < totalHits) {\n            showLoadMoreButton();\n        } else {\n            iziToast.info({\n                title: 'End of results',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            })\n        }\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch more images.',\n            position: 'topRight',\n        })\n    } finally {\n        hideLoader();\n    }\n});\n\nfunction smoothScroll() {\n    const card = document.querySelector(\".gallery-item\");\n    if (card) {\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        });\n    }\n}"],"names":["gallery","loader","loadMoreBtn","lightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","API_KEY","BASE_URL","PER_PAGE","getImagesByQuery","query","page","params","axios","error","form","input","currentPage","currentQuery","totalHits","loadedHits","event","iziToast","data","smoothScroll","card","cardHeight"],"mappings":"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"}